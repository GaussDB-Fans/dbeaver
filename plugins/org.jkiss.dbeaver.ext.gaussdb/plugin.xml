<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.2"?>
<plugin>
    <extension point="org.jkiss.dbeaver.postgresql.serverType">
        <serverType id="gaussdb"
                    name="GaussDB"
                    class="org.jkiss.dbeaver.ext.gaussdb.model.PostgreServerGaussDB"
                    logo="icons/gaussdb_logo.png"
                    customURL="true" turnOffPreparedStatements="true"/>
    </extension>
    
    <extension point="org.jkiss.dbeaver.sqlDialect">
        <dialect id="gaussdb" parent="basic" class="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBDialect" label="GaussDB" description="GaussDB dialect." icon="icons/gaussdb_icon.png">
            <property name="insertMethods" value="pgInsertIgnore,pgReplaceIgnore"/>
            <keywords value=""/>
            <execKeywords value=""/>
            <ddlKeywords value=""/>
            <dmlKeywords value=""/>
            <functions value=""/>
            <types value=""/>

            <property name="" value=""/>
        </dialect>
    </extension>

    <extension point="org.jkiss.dbeaver.dataSourceProvider">
        <datasource
                class="org.jkiss.dbeaver.ext.gaussdb.GaussDBDataSourceProvider"
                description="%datasource.gaussdb.description"
                id="gaussdb"
                label="GaussDB"
                icon="icons/gaussdb_icon.png"
                dialect="gaussdb"
                inheritClients="false">
                
            <drivers managable="true">
                <driver
                        id="gaussdb-jdbc"
                        label="GaussDB"
                        icon="icons/gaussdb_icon.png"
                        iconBig="icons/gaussdb_icon_big.png"
                        class="org.postgresql.Driver"
                        sampleURL="jdbc:postgresql://{host}[:{port}]/[{database}]"
                        defaultPort="8000"
                        
                        description="%driver.gaussdb.description"
                        categories="sql,analytic">

                    <file type="jar" path="https://repo.huaweicloud.com/repository/maven/huaweicloudsdk/gsjdbc4/gsjdbc4/1.0/gsjdbc4-1.0.jar"
                          bundle="!drivers.gaussdb"/>
                    <parameter name="serverType" value="gaussdb"/>
                    <property name="loginTimeout" value="20"/>
                    <property name="connectTimeout" value="20"/>
                    <property name="prepareThreshold" value="0"/>
                </driver>
            </drivers>
            

          <tree path="gaussdb" label="GaussDB data source">
                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBDatabase" label="%tree.databases.node.name" icon="#folder_database" description="%tree.databases.node.tip">
                    <items label="%tree.database.node.name" path="database" property="databases" icon="#database">
                    	<folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBSchema" label="%tree.sysschemas.node.name" icon="#folder_schema" description="%tree.schemas.node.tip"  virtual="true">
                            <items label="%tree.sysschemas.node.name" path="schema" property="sysSchemas" icon="#schema" virtual="true">
                                <icon if="object.utility || object.external" icon="#schema_util"/>
                                <icon if="object.system" icon="#schema_system"/>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTable" label="%tree.tables.node.name" icon="#folder_table" description="%tree.tables.node.tip">
                                    <items label="%tree.table.node.name" path="table" property="tables" icon="#table">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableColumn" label="%tree.columns.node.name" icon="#columns" description="%tree.columns.node.tip" visibleIf="!object.isPartition()">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableConstraint" label="%tree.constraints.node.name" icon="#constraints" description="%tree.constraints.node.tip" visibleIf="!object.view">
                                            <items label="%tree.constraint.node.name" path="uniqueKey" property="constraints" icon="#unique-key">
                                                <items label="%tree.constraint.columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableForeignKey" label="%tree.foreign_keys.node.name" icon="#foreign-keys" description="%tree.foreign_key.node.tip">
                                            <items label="%tree.foreign_key.node.name" path="association" property="foreignKeys" icon="#foreign-key">
                                                <items label="%tree.foreign_key_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreIndex" label="%tree.indexes.node.name" icon="#indexes" description="%tree.indexes.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsIndexes()">
                                            <items label="%tree.index.node.name" path="index" property="indexes" icon="#index">
                                                <items label="%tree.index_columns.node.name" path="column" property="attributeReferences" icon="#column" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                        <folder label="%tree.references.node.name" icon="#references" description="%tree.references.node.tip" virtual="true">
                                            <items label="%tree.reference.node.name" path="reference" property="references" icon="#reference" virtual="true">
                                                <items label="%tree.reference_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true" virtual="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableBase" label="%tree.partitions.node.name" icon="#folder_table" description="%tree.partitions.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsPartitions()">
                                            <itemType label="%tree.partition.node.name" icon="#partition" type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTablePartition"/>
                                            <items label="%tree.partition.node.name" path="partition" property="partitions" icon="#partition" recursive="../..">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableReal" label="%tree.tablechildren.node.name" icon="#folder_table" description="Table children" virtual="true" visibleIf="object.hasSubClasses() &amp;&amp; !object.isPartition()">
                                            <items label="%tree.tablechildren.node.name" path="subTables" property="subTables" icon="#table" virtual="true" recursive="../.." >
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTrigger" label="%tree.triggers.node.name" icon="#triggers" description="%tree.triggers.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsTriggers()">
                                            <items label="%tree.trigger.node.name" path="trigger" property="triggers" icon="#trigger"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRule" label="%tree.rules.node.name" icon="#rules" description="%tree.rules.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRules()">
                                            <items label="%tree.rule.node.name" path="rule" property="rules" icon="#rule"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTablePolicy" label="%tree.policies.node.name" description="%tree.policies.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRowLevelSecurity()">
                                            <items label="%tree.policy.node.name" path="policy" property="policies" icon="#locked"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableForeign" label="%tree.foreign.tables.node.name" icon="#folder_link" description="%tree.foreign.tables.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsForeignServers()" virtual="true">
                                    <items label="%tree.foreign.table.node.name" path="foreignTable" property="foreignTables" icon="#table" virtual="true">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableColumn" label="%tree.columns.node.name" icon="#columns" description="%tree.columns.node.tip" visibleIf="!object.isPartition()">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableConstraint" label="%tree.constraints.node.name" icon="#constraints" description="%tree.constraints.node.tip">
                                            <items label="%tree.constraint.node.name" path="uniqueKey" property="constraints" icon="#unique-key">
                                                <items label="%tree.constraint.columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreView" label="%tree.tviews.node.name" icon="#folder_view" description="%tree.tviews.node.tip">
                                    <items label="%tree.tview.node.name" path="view" property="views" icon="#view">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAttribute" label="%tree.columns.node.name" icon="#columns" description="View columns">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTrigger" label="%tree.triggers.node.name" icon="#triggers" description="View triggers" visibleIf="connected &amp;&amp; dataSource.serverType.supportsTriggers()">
                                            <items label="%tree.trigger.node.name" path="trigger" property="triggers" icon="#trigger"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRule" label="%tree.rules.node.name" icon="#rules" description="Table rules" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRules()">
                                            <items label="%tree.rule.node.name" path="rule" property="rules" icon="#rule"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreMaterializedView" label="%tree.mviews.node.name" icon="#folder_view" description="%tree.mviews.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsMaterializedViews()">
                                    <items label="%tree.mview.node.name" path="view" property="materializedViews" icon="#view">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAttribute" label="%tree.columns.node.name" icon="#columns" description="View columns">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreIndex" label="%tree.indexes.node.name" icon="#indexes" description="%tree.indexes.node.tip">
                                            <items label="%tree.index.node.name" path="index" property="indexes" icon="#index">
                                                <items label="%tree.index_columns.node.name" path="column" property="attributeReferences" icon="#column" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.model.struct.rdb.DBSTableIndex" label="%tree.indexes.node.name" icon="#indexes" description="%tree.indexes.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsIndexes()" virtual="true">
                                    <items icon="#index" label="%tree.index.node.name" path="index" property="indexes" virtual="true">
                                        <items icon="#column" label="%tree.index_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" inline="true" navigable="false" virtual="true">
                                        </items>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBProcedure" label="%tree.procedures.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                    <items label="%tree.procedure.node.name" itemLabel="%tree.procedure.node.name" path="procedure" property="gaussDBProcedures" icon="#procedure">
                                        <folder label="%tree.procedure_columns.node.name" icon="#columns" description="%tree.procedure_columns.node.name">
                                            <items label="%tree.procedure_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="parameters" navigable="false"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBFunction" label="%tree.functions.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                    <items label="%tree.function.node.name" itemLabel="%tree.functions.node.name" path="procedure" property="gaussDBFunctions" icon="#function">
                                        <folder label="%tree.function_columns.node.name" icon="#columns" description="%tree.function_columns.node.name">
                                            <items label="%tree.function_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="parameters" navigable="false"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreSequence" label="%tree.sequences.node.name" icon="#sequences" description="%tree.sequences.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsSequences()">
                                    <items label="%tree.sequence.node.name" path="sequence" property="sequences" icon="#sequence"/>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreDataType" label="%tree.types.node.name" icon="#data_types" description="%tree.types.node.tip">
                                    <items label="%tree.type.node.name" path="dataType" property="dataTypes" icon="#data_type">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreDataTypeAttribute" label="%tree.attributes.node.name" icon="#attributes" description="Type attributes" visibleIf="object.hasAttributes()">
                                            <items label="%tree.attribute.node.name" path="attribute" property="attributes" icon="#attribute"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAggregate" label="%tree.aggregates.node.name" icon="#functions" description="%tree.aggregates.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsAggregates()">
                                    <items label="%tree.aggregate.node.name" path="aggregate" property="aggregateFunctions" icon="#function"/>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBPackage" label="%tree.package.node.name" icon="#packages" description="%tree.package.node.tip" visibleIf="connected &amp;&amp; object.database.isPackageSupported()">
                                    <items label="%tree.package.node.name" path="package" property="packages" icon="#package">
                                        <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBProcedure" label="%tree.procedures.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                            <items label="%tree.procedure.node.name" itemLabel="%tree.procedure.node.name" path="packageProcedures" property="packageProcedures" icon="#procedure"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBFunction" label="%tree.functions.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                            <items label="%tree.function.node.name" itemLabel="%tree.procedure.node.name" path="packageFunctions" property="packageFunctions" icon="#procedure"/>
                                        </folder>
                                     </items>
                                </folder>
                            </items>
                        </folder>
                        <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBSchema" label="%tree.userschemas.node.name" icon="#folder_schema" description="%tree.schemas.node.tip">
                            <items label="%tree.userschemas.node.name" path="schema" property="userSchemas" icon="#schema">
                                <icon if="object.utility || object.external" icon="#schema_util"/>
                                <icon if="object.system" icon="#schema_system"/>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTable" label="%tree.tables.node.name" icon="#folder_table" description="%tree.tables.node.tip">
                                    <items label="%tree.table.node.name" path="table" property="tables" icon="#table">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableColumn" label="%tree.columns.node.name" icon="#columns" description="%tree.columns.node.tip" visibleIf="!object.isPartition()">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableConstraint" label="%tree.constraints.node.name" icon="#constraints" description="%tree.constraints.node.tip" visibleIf="!object.view">
                                            <items label="%tree.constraint.node.name" path="uniqueKey" property="constraints" icon="#unique-key">
                                                <items label="%tree.constraint.columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableForeignKey" label="%tree.foreign_keys.node.name" icon="#foreign-keys" description="%tree.foreign_key.node.tip">
                                            <items label="%tree.foreign_key.node.name" path="association" property="foreignKeys" icon="#foreign-key">
                                                <items label="%tree.foreign_key_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreIndex" label="%tree.indexes.node.name" icon="#indexes" description="%tree.indexes.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsIndexes()">
                                            <items label="%tree.index.node.name" path="index" property="indexes" icon="#index">
                                                <items label="%tree.index_columns.node.name" path="column" property="attributeReferences" icon="#column" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                        <folder label="%tree.references.node.name" icon="#references" description="%tree.references.node.tip" virtual="true">
                                            <items label="%tree.reference.node.name" path="reference" property="references" icon="#reference" virtual="true">
                                                <items label="%tree.reference_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true" virtual="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableBase" label="%tree.partitions.node.name" icon="#folder_table" description="%tree.partitions.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsPartitions()">
                                            <itemType label="%tree.partition.node.name" icon="#partition" type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTablePartition"/>
                                            <items label="%tree.partition.node.name" path="partition" property="partitions" icon="#partition" recursive="../..">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableReal" label="%tree.tablechildren.node.name" icon="#folder_table" description="Table children" virtual="true" visibleIf="object.hasSubClasses() &amp;&amp; !object.isPartition()">
                                            <items label="%tree.tablechildren.node.name" path="subTables" property="subTables" icon="#table" virtual="true" recursive="../.." >
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTrigger" label="%tree.triggers.node.name" icon="#triggers" description="%tree.triggers.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsTriggers()">
                                            <items label="%tree.trigger.node.name" path="trigger" property="triggers" icon="#trigger"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRule" label="%tree.rules.node.name" icon="#rules" description="%tree.rules.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRules()">
                                            <items label="%tree.rule.node.name" path="rule" property="rules" icon="#rule"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTablePolicy" label="%tree.policies.node.name" description="%tree.policies.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRowLevelSecurity()">
                                            <items label="%tree.policy.node.name" path="policy" property="policies" icon="#locked"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableForeign" label="%tree.foreign.tables.node.name" icon="#folder_link" description="%tree.foreign.tables.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsForeignServers()" virtual="true">
                                    <items label="%tree.foreign.table.node.name" path="foreignTable" property="foreignTables" icon="#table" virtual="true">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableColumn" label="%tree.columns.node.name" icon="#columns" description="%tree.columns.node.tip" visibleIf="!object.isPartition()">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableConstraint" label="%tree.constraints.node.name" icon="#constraints" description="%tree.constraints.node.tip">
                                            <items label="%tree.constraint.node.name" path="uniqueKey" property="constraints" icon="#unique-key">
                                                <items label="%tree.constraint.columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreView" label="%tree.tviews.node.name" icon="#folder_view" description="%tree.tviews.node.tip">
                                    <items label="%tree.tview.node.name" path="view" property="views" icon="#view">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAttribute" label="%tree.columns.node.name" icon="#columns" description="View columns">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTrigger" label="%tree.triggers.node.name" icon="#triggers" description="View triggers" visibleIf="connected &amp;&amp; dataSource.serverType.supportsTriggers()">
                                            <items label="%tree.trigger.node.name" path="trigger" property="triggers" icon="#trigger"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRule" label="%tree.rules.node.name" icon="#rules" description="Table rules" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRules()">
                                            <items label="%tree.rule.node.name" path="rule" property="rules" icon="#rule"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreMaterializedView" label="%tree.mviews.node.name" icon="#folder_view" description="%tree.mviews.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsMaterializedViews()">
                                    <items label="%tree.mview.node.name" path="view" property="materializedViews" icon="#view">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAttribute" label="%tree.columns.node.name" icon="#columns" description="View columns">
                                            <items label="%tree.column.node.name" path="attribute" property="attributes" icon="#column">
                                            </items>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreIndex" label="%tree.indexes.node.name" icon="#indexes" description="%tree.indexes.node.tip">
                                            <items label="%tree.index.node.name" path="index" property="indexes" icon="#index">
                                                <items label="%tree.index_columns.node.name" path="column" property="attributeReferences" icon="#column" navigable="false" inline="true">
                                                </items>
                                            </items>
                                        </folder>
                                        <folder label="%tree.dependencies.node.name" icon="#references" description="%tree.dependencies.node.tip" virtual="true">
                                            <items label="%tree.dependency.node.name" path="dependency" property="dependencies" icon="#reference" virtual="true"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.model.struct.rdb.DBSTableIndex" label="%tree.indexes.node.name" icon="#indexes" description="%tree.indexes.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsIndexes()" virtual="true">
                                    <items icon="#index" label="%tree.index.node.name" path="index" property="indexes" virtual="true">
                                        <items icon="#column" label="%tree.index_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="attributeReferences" inline="true" navigable="false" virtual="true">
                                        </items>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBProcedure" label="%tree.procedures.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                    <items label="%tree.procedure.node.name" itemLabel="%tree.procedure.node.name" path="procedure" property="gaussDBProcedures" icon="#procedure">
                                        <folder label="%tree.procedure_columns.node.name" icon="#columns" description="%tree.procedure_columns.node.name">
                                            <items label="%tree.procedure_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="parameters" navigable="false"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBFunction" label="%tree.functions.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                    <items label="%tree.function.node.name" itemLabel="%tree.functions.node.name" path="procedure" property="gaussDBFunctions" icon="#function">
                                        <folder label="%tree.function_columns.node.name" icon="#columns" description="%tree.function_columns.node.name">
                                            <items label="%tree.function_columns.node.name" itemLabel="%tree.column.node.name" path="column" property="parameters" navigable="false"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreSequence" label="%tree.sequences.node.name" icon="#sequences" description="%tree.sequences.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsSequences()">
                                    <items label="%tree.sequence.node.name" path="sequence" property="sequences" icon="#sequence"/>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreDataType" label="%tree.types.node.name" icon="#data_types" description="%tree.types.node.tip">
                                    <items label="%tree.type.node.name" path="dataType" property="dataTypes" icon="#data_type">
                                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreDataTypeAttribute" label="%tree.attributes.node.name" icon="#attributes" description="Type attributes" visibleIf="object.hasAttributes()">
                                            <items label="%tree.attribute.node.name" path="attribute" property="attributes" icon="#attribute"/>
                                        </folder>
                                    </items>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAggregate" label="%tree.aggregates.node.name" icon="#functions" description="%tree.aggregates.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsAggregates()">
                                    <items label="%tree.aggregate.node.name" path="aggregate" property="aggregateFunctions" icon="#function"/>
                                </folder>
                                <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBPackage" label="%tree.package.node.name" icon="#packages" description="%tree.package.node.tip" visibleIf="connected &amp;&amp; object.database.isPackageSupported()">
                                    <items label="%tree.package.node.name" path="package" property="packages" icon="#package">
                                        <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBProcedure" label="%tree.procedures.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                            <items label="%tree.procedure.node.name" itemLabel="%tree.procedure.node.name" path="packageProcedures" property="packageProcedures" icon="#procedure"/>
                                        </folder>
                                        <folder type="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBFunction" label="%tree.functions.node.name" icon="#procedures" description="%tree.procedures.node.tip">
                                            <items label="%tree.function.node.name" itemLabel="%tree.function.node.name" path="packageFunctions" property="packageFunctions" icon="#procedure"/>
                                        </folder>
                                     </items>
                                </folder>
                            </items>
                        </folder>

                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreEventTrigger" label="%tree.event.triggers.node.name" icon="#triggers" description="%tree.event.triggers.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsEventTriggers()">
                            <items label="%tree.event.trigger.node.name" path="eventTrigger" property="eventTriggers" icon="#trigger"/>
                        </folder>
                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreExtension" label="%tree.extensions.node.name" icon="#folder_admin" description="%tree.extensions.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsExtensions()">
                            <items label="%tree.extension.node.name" path="extension" property="extensions" icon="#package"/>
                        </folder>
                        <folder label="%tree.storage.node.name" icon="#folder_info" description="%tree.storage.node.tip">
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreTablespace" label="%tree.tablespaces.node.name" icon="#tablespaces" description="Tablespaces" visibleIf="connected &amp;&amp; dataSource.serverType.supportsTablespaces()">
                                <items label="%tree.tablespace.node.name" path="tablespace" property="tablespaces" icon="#tablespace"/>
                            </folder>
                        </folder>

                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreInformation" label="%tree.information.node.name" icon="#folder_info" description="%tree.information.node.tip">
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreForeignDataWrapper" label="%tree.foreignDataWrappers.node.name" description="Foreign data wrappers" visibleIf="connected &amp;&amp; dataSource.serverType.supportsForeignServers()">
                                <items label="%tree.foreignDataWrapper.node.name" path="foreignDataWrapper" property="foreignDataWrappers"/>
                            </folder>
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreForeignServer" label="%tree.foreignServers.node.name" description="Foreign servers" visibleIf="connected &amp;&amp; dataSource.serverType.supportsForeignServers()">
                                <items label="%tree.foreignServer.node.name" path="foreignServer" property="foreignServers">
                                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreUserMapping" label="%tree.userMappings.node.name" icon="#folder_user"  description="User Mappings" >
                                        <items label="%tree.userMapping.node.name" path="userMapping" property="userMappings" icon="#user" />
                                    </folder>
                                </items>
                            </folder>
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreSetting" label="%tree.settings.node.name" icon="#settings" description="Settings">
                                <items label="%tree.setting.node.name" path="setting" property="settings" icon="#setting"/>
                            </folder>
                        </folder>

                        <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRole" label="%tree.roles.node.name" icon="#folder_user" description="%tree.roles.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsRoles()">
                            <items label="%tree.role.node.name" path="users" property="authIds" icon="#user">
                                <icon if="!object.canLogin" icon="#user_group"/>
                                <folder id="members" type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRoleMember" label="%tree.role.members.node.name" icon="#folder_user" description="%tree.role.members.node.tip" visibleIf="!object.canLogin"  navigable="false">
                                    <items label="%tree.role.members.node.name" itemLabel="%tree.role.member.node.name" path="members" property="members" visibleIf="!object.canLogin"/>
                                </folder>
                                <folder id="belongs" type="org.jkiss.dbeaver.ext.postgresql.model.PostgreRoleMember" label="%tree.role.belongs.node.name" icon="#folder_user" description="%tree.role.belongs.node.tip" navigable="false">
                                    <items label="%tree.role.belongs.node.name" itemLabel="%tree.role.belongs.node.name" path="members" property="belongs" icon="#folder_user"/>
                                </folder>
                            </items>
                        </folder>

                    </items>
                </folder>
                <folder label="%tree.administer.node.name" icon="#folder_admin" description="%tree.administer.node.tip">
                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreJob" label="%tree.jobs.node.name" description="%tree.jobs.node.description" visibleIf="connected &amp;&amp; dataSource.serverType.getSupportJobs()">
                        <items label="%tree.job.node.name" path="job" property="defaultInstance.jobs" icon="#job">
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreJobStep" label="%tree.job.steps.node.name">
                                <items label="%tree.job.step.node.name" path="step" property="steps" icon="#job"/>
                            </folder>
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreJobSchedule" label="%tree.job.schedules.node.name">
                                <items label="%tree.job.schedule.node.name" path="schedule" property="schedules" icon="#job_schedule"/>
                            </folder>
                        </items>
                    </folder>
                    <treeContribution category="connectionEditor"/>
                </folder>

                <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreInformation" label="%tree.information.node.name" icon="#folder_info" description="%tree.information.node.tip">
                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAccessMethod" label="%tree.accessMethods.node.name" icon="#languages" description="%tree.accessMethods.node.tip">
                        <items label="%tree.accessMethod.node.name" path="accessMethod" property="defaultInstance.accessMethods" icon="#accessMethod">
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreOperatorClass" label="%tree.opClasses.node.name" icon="#operator" description="%tree.opClasses.node.tip">
                                <items label="%tree.opClass.node.name" itemLabel="%tree.opClass.node.name" path="operatorClass" property="operatorClasses" icon="#operator"/>
                            </folder>
                            <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreOperatorFamily" label="%tree.opFamilies.node.name" icon="#family" description="%tree.opFamilies.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsOpFamily()">
                                <items label="%tree.opFamily.node.name" itemLabel="%tree.opFamily.node.name" path="operatorFamily" property="operatorFamilies" icon="#family"/>
                            </folder>
                        </items>
                    </folder>
                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreCharset" label="%tree.encodings.node.name" icon="#encodings" description="Encodings">
                        <items label="%tree.encoding.node.name" path="encoding" property="defaultInstance.encodings" icon="#encoding"/>
                    </folder>
                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreCollation" label="%tree.collations.node.name" icon="#collations" description="Collations" visibleIf="connected &amp;&amp; dataSource.serverType.supportsCollations()">
                        <items label="%tree.collation.node.name" path="collation" property="defaultInstance.collations" icon="#collation"/>
                    </folder>
                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreLanguage" label="%tree.languages.node.name" icon="#languages" description="Languages">
                        <items label="%tree.language.node.name" path="language" property="defaultInstance.languages" icon="#language"/>
                    </folder>
                    <folder type="org.jkiss.dbeaver.ext.postgresql.model.PostgreAvailableExtension" label="%tree.avalextensions.node.name" icon="#extensions" description="%tree.extensions.node.tip" visibleIf="connected &amp;&amp; dataSource.serverType.supportsExtensions()">
                        <items label="%tree.avalextension.node.name" path="extension" property="defaultInstance.availableExtensions" icon="#extension"/>
                    </folder>
                </folder>
            </tree>

        </datasource>
    </extension>

    <extension point="org.jkiss.dbeaver.dashboard">

        <dashboard id="gaussdb.sessionCount" label="Server sessions" defaultView="timeseries" group="Standard" updatePeriod="2000"
            calc="value" value="integer" fetch="columns" showByDefault="true" description="Shows active/idle server sessions">
            <datasource id="gaussdb"/>
            <query>
SELECT
    (SELECT count(*) AS "Active" FROM pg_catalog.pg_stat_activity sa WHERE state='active'),
    (SELECT count(*) AS "Idle" FROM pg_catalog.pg_stat_activity sa WHERE state='idle'),
    (SELECT count(*) AS "Total" FROM pg_catalog.pg_stat_activity sa WHERE state IS NOT NULL)
            </query>
        </dashboard>
        <dashboard id="gaussdb.transactionCount" label="Transactions per second" group="Standard" defaultView="timeseries" updatePeriod="2000"
            calc="delta" value="integer" fetch="columns" showByDefault="true" description="Shows commit/rollback transactions per second">
            <datasource id="gaussdb"/>
            <query>
SELECT
    (SELECT sum(xact_commit) + sum(xact_rollback) AS "Total" FROM pg_stat_database),
    (SELECT sum(xact_commit) AS "Commit" FROM pg_stat_database),
    (SELECT sum(xact_rollback) AS "Rollback" FROM pg_stat_database)
            </query>
        </dashboard>
        <dashboard id="gaussdb.blockIO" label="Block IOI" group="Standard" defaultView="timeseries" updatePeriod="2000"
            calc="delta" value="bytes" fetch="columns" showByDefault="true" description="Shows blocking IO operations per second">
            <datasource id="gaussdb"/>
            <query>
SELECT
    (SELECT sum(blks_read) as "Read" FROM pg_stat_database),
    (SELECT sum(blks_hit) as "Hits" FROM pg_stat_database)
            </query>
        </dashboard>

    </extension>
	
	<extension point="org.jkiss.dbeaver.objectManager">
        <manager class="org.jkiss.dbeaver.ext.gaussdb.edit.GaussDBDatabaseManager" objectType="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBDatabase"/>
    	<manager class="org.jkiss.dbeaver.ext.gaussdb.edit.GaussDBSchemaManager" objectType="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBSchema"/>
    	<manager class="org.jkiss.dbeaver.ext.gaussdb.edit.GaussDBPackageManager" objectType="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBPackage"/>
    	<manager class="org.jkiss.dbeaver.ext.gaussdb.edit.GaussDBProcedureManager" objectType="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBProcedure"/>
    	<manager class="org.jkiss.dbeaver.ext.gaussdb.edit.GaussDBFunctionManager" objectType="org.jkiss.dbeaver.ext.gaussdb.model.GaussDBFunction"/>
    </extension>
    
    <extension point="org.jkiss.dbeaver.task">
    <category id="gaussdb" name="GaussDB" description="%org.jkiss.dbeaver.task.category.gaussdb.description" icon="icons/gaussdb_icon.png"/>
    <category id="gaussdbTool" parent="gaussdb" name="%org.jkiss.dbeaver.task.category.gaussdbTool.name" description="%org.jkiss.dbeaver.task.category.gaussdbTool.description" icon="icons/gaussdb_icon.png"/>

    <!-- SQL tools -->
    <task id="pgToolRefreshMView" name="%tasks.mview.refresh.node.name" description="%tasks.mview.refresh.node.description" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolMViewRefresh">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreMaterializedView"/>
    </task>
    <task id="pgToolTableAnalyze" name="%tasks.analyze.table.node.name" description="%tasks.analyze.table.node.description" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolBaseAnalyze">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableBase"/>
    </task>
    <task id="pgToolDatabaseAnalyze" name="%tasks.analyze.database.node.name" description="%tasks.analyze.database.node.name" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolBaseAnalyze">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreDatabase"/>
    </task>
    <task id="pgToolTableTruncate" name="%tasks.truncate.node.name" description="%tasks.truncate.node.description" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolTableTruncate">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableBase"/>
    </task>
    <task id="pgToolTableVacuum" name="%tasks.vacuum.table.node.name" description="%tasks.vacuum.table.node.description" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolBaseVacuum">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreTableBase"/>
    </task>
    <task id="pgToolDatabaseVacuum" name="%tasks.vacuum.database.node.name" description="%tasks.vacuum.database.node.name" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolBaseVacuum">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreDatabase"/>
    </task>
    <task id="pgToolTriggerEnable" name="%task.pgToolTriggerEnable.name" description="%task.pgToolTriggerEnable.name" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolTableTriggerEnable">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreTriggerBase" if="object.enabledState == 'D'"/>
    </task>
    <task id="pgToolTriggerDisable" name="%task.pgToolTriggerDisable.name" description="%task.pgToolTriggerDisable.name" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/admin.png" type="gaussdbTool" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreToolTableTriggerDisable">
        <datasource id="gaussdb"/>
        <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreTriggerBase" if="object.enabledState != 'D'"/>
    </task>
    
    <task id="pgScriptExecute" name="%task.pgScriptExecute.name" description="%task.pgScriptExecute.description" icon="platform:/plugin/org.jkiss.dbeaver.model/icons/tree/script.png" type="postgresql" handler="org.jkiss.dbeaver.ext.postgresql.tasks.PostgreScriptExecuteHandler">
            <datasource id="postgresql"/>
            <objectType name="org.jkiss.dbeaver.ext.postgresql.model.PostgreDatabase" if="object.dataSource.serverType.supportsNativeClient()"/>
    </task>
</extension>


</plugin>
